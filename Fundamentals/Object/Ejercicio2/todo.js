const animals = [
    {
         "name": "Meowsy",
         "species": "cat",
         "foods": {
           "likes": [
             "tuna",
             "catnip"
           ],
           "dislikes": [
             "ham",
             "zucchini"
           ]
         }
       },
    {
         "name": "Barky",
         "species": "dog",
         "foods": {
           "likes": [
             "bones",
             "carrots"
           ],
           "dislikes": [
             "tuna"
           ]
         }
       },
    {
         "name": "Purrpaws",
         "species": "cat",
         "foods": {
           "likes": [
             "mice"
           ],
           "dislikes": [
             "cookies"
           ]
         }
       },
   {
         "name": "Whiskers",
         "species":"cat",
         "foods": {
           "likes": [
             "salmon",
             "catnip"
           ],
           "dislikes": [
             "cheese",
             "lettuce"
           ]
         }
       },
   {
         "name": "Rover",
         "species":"dog",
         "foods": {
           "likes": [
             "steak",
             "potatoes"
           ],
           "dislikes": [
             "fish",
             "broccoli"
           ]
         }
       },
   {
         "name": "Fluffy",
         "species":"cat",
         "foods": {
           "likes": [
             "tuna",
             "feathers"
           ],
           "dislikes": [
             "chocolate"
           ]
         }
       },
   {
         "name": "Rocky",
         "species":"dog",
         "foods": {
           "likes": [
             "chicken",
             "peas"
           ],
           "dislikes": [
             "carrots"
           ]
         }
       },
   {
         "name": "Mittens",
         "species":"cat",
         "foods": {
           "likes": [
             "tuna",
             "mice"
           ],
           "dislikes": [
             "broccoli",
             "carrots"
           ]
         }
       },
   {
         "name": "Max",
         "species":"dog",
         "foods": {
           "likes": [
             "bacon",
             "sausages"
           ],
           "dislikes": [
             "spinach",
             "lamb"
           ]
         }
       },
   {
         "name": "Shadow",
         "species":"cat",
         "foods": {
           "likes": [
             "salmon",
             "shrimp"
           ],
           "dislikes": [
             "onions",
             "peppers"
           ]
         }
       },
       {
         "name": "Buddy",
         "species":"dog",
         "foods": {
           "likes": [
             "beef",
             "sweet potatoes"
           ],
           "dislikes": [
             "fish",
             "cabbage"
           ]
         }
       },
       {
         "name": "Smokey",
         "species":"cat",
         "foods": {
           "likes": [
             "chicken",
             "tuna"
           ],
           "dislikes": [
             "liver",
             "green beans"
           ]
         }
       },
       {
         "name": "Lucky",
         "species":"dog",
         "foods": {
           "likes": [
             "duck",
             "pumpkin"
           ],
           "dislikes": [
             "cheese",
             "carrots"
           ]
         }
       },
       {
         "name": "Oreo",
         "species":"cat",
         "foods": {
           "likes": [
             "fish",
             "catnip"
           ],
           "dislikes": [
             "peanut butter",
             "tomatoes"
           ]
         }
       },
       {
         "name": "Charlie",
         "species":"dog",
         "foods": {
           "likes": [
             "turkey",
             "rice"
           ],
           "dislikes": [
             "mushrooms",
             "liver"
           ]
         }
       },
       {
         "name": "Socks",
         "species":"cat",
         "foods": {
           "likes": [
             "tuna",
             "chicken"
           ],
           "dislikes": [
             "potatoes",
             "carrots"
           ]
         }
       },
       {
         "name": "Zeus",
         "species":"dog",
         "foods": {
           "likes": [
             "lamb",
             "potatoes"
           ],
           "dislikes": [
             "fish",
             "onions"
           ]
         }
       },
       {
         "name": "Misty",
         "species":"cat",
         "foods": {
           "likes": [
             "salmon",
             "catnip"
           ],
           "dislikes": [
             "cheese",
             "lettuce"
           ]
         }
       },
       {
         "name": "Rosie",
         "species":"dog",
         "foods": {
           "likes": [
             "chicken",
             "carrots"
           ],
           "dislikes": [
             "liver",
             "broccoli"
           ]
         }
       },
       {
         "name": "Jinx",
         "species":"cat",
         "foods": {
           "likes": [
             "mice",
             "tuna"
           ],
           "dislikes": [
             "cookies",
             "spinach"
           ]
         }
       },
       {
         "name": "Bear",
         "species":"dog",
         "foods": {
           "likes": [
             "beef",
             "sweet potatoes"
           ],
           "dislikes": [
             "fish",
             "cabbage"
           ]
         }
       },
       {
         "name": "Cleo",
         "species":"cat",
         "foods": {
           "likes": [
             "fish",
             "shrimp"
           ],
           "dislikes": [
             "onions",
             "peppers"
           ]
         }
       },
       {
         "name": "Cooper",
         "species":"dog",
         "foods": {
           "likes": [
             "bacon",
             "sausages"
           ],
           "dislikes": [
             "spinach",
             "lamb"
           ]
         }
       },
       {
         "name": "Oliver",
         "species":"cat",
         "foods": {
           "likes": [
             "chicken",
             "tuna"
           ],
           "dislikes": [
             "liver",
             "green beans"
           ]
         }
       },
       {
         "name": "Bella",
         "species":"dog",
         "foods": {
           "likes": [
             "duck",
             "pumpkin"
           ],
           "dislikes": [
             "cheese",
             "carrots"
           ]
         }
       },
       {
         "name": "Simba",
         "species":"cat",
         "foods": {
           "likes": [
             "fish",
             "catnip"
           ],
           "dislikes": [
             "peanut butter",
             "tomatoes"
           ]
         }
       },
       {
         "name": "Lola",
         "species":"dog",
         "foods": {
           "likes": [
             "turkey",
             "rice"
           ],
           "dislikes": [
             "mushrooms",
             "liver"
           ]
         }
       },
       {
         "name": "Milo",
         "species":"cat",
         "foods": {
           "likes": [
             "tuna",
             "chicken"
           ],
           "dislikes": [
             "potatoes",
             "carrots"
           ]
         }
       },
       {
         "name": "Apollo",
         "species":"dog",
         "foods": {
           "likes": [
             "lamb",
             "potatoes"
           ],
           "dislikes": [
             "fish",
             "onions"
           ]
         }
       },
       {
         "name": "Luna",
         "species":"cat",
         "foods": {
           "likes": [
             "salmon",
             "catnip"
           ],
           "dislikes": [
             "cheese",
             "lettuce"
           ]
         }
       },
       {
         "name": "Cody",
         "species":"dog",
         "foods": {
           "likes": [
             "chicken",
             "carrots"
           ],
           "dislikes": [
             "liver",
             "broccoli"
           ]
         }
       },
       {
         "name": "Mocha",
         "species":"cat",
         "foods": {
           "likes": [
             "mice",
             "tuna"
           ],
           "dislikes": [
             "cookies",
             "spinach"
           ]
         }
       },
       {
         "name": "Mittens",
         "species":"cat",
         "foods": {
           "likes": [
             "tuna",
             "mice"
           ],
           "dislikes": [
             "broccoli",
             "carrots"
           ]
         }
       },
       {
         "name": "Max",
         "species":"dog",
         "foods": {
           "likes": [
             "bacon",
             "sausages"
           ],
           "dislikes": [
             "spinach",
             "lamb"
           ]
         }
       },
       {
         "name": "Shadow",
         "species":"cat",
         "foods": {
           "likes": [
             "salmon",
             "shrimp"
           ],
           "dislikes": [
             "onions",
             "peppers"
           ]
         }
       },
       {
         "name": "Buddy",
         "species":"dog",
         "foods": {
           "likes": [
             "beef",
             "sweet potatoes"
           ],
           "dislikes": [
             "fish",
             "cabbage"
           ]
         }
       },
       {
         "name": "Smokey",
         "species":"cat",
         "foods": {
           "likes": [
             "chicken",
             "tuna"
           ],
           "dislikes": [
             "liver",
             "green beans"
           ]
         }
       },
       {
         "name": "Lucky",
         "species":"dog",
         "foods": {
           "likes": [
             "duck",
             "pumpkin"
           ],
           "dislikes": [
             "cheese",
             "carrots"
           ]
         }
       },
       {
         "name": "Oreo",
         "species":"cat",
         "foods": {
           "likes": [
             "fish",
             "catnip"
           ],
           "dislikes": [
             "peanut butter",
             "tomatoes"
           ]
         }
       },
       {
         "name": "Charlie",
         "species":"dog",
         "foods": {
           "likes": [
             "turkey",
             "rice"
           ],
           "dislikes": [
             "mushrooms",
             "liver"
           ]
         }
       },
       {
         "name": "Socks",
         "species":"cat",
         "foods": {
           "likes": [
             "tuna",
             "chicken"
           ],
           "dislikes": [
             "potatoes",
             "carrots"
           ]
         }
       },
       {
         "name": "Zeus",
         "species":"dog",
         "foods": {
           "likes": [
             "lamb",
             "potatoes"
           ],
           "dislikes": [
             "fish",
             "onions"
           ]
         }
       },
       {
         "name": "Misty",
         "species":"cat",
         "foods": {
           "likes": [
             "salmon",
             "catnip"
           ],
           "dislikes": [
             "cheese",
             "lettuce"
           ]
         }
       },
       {
         "name": "Rosie",
         "species":"dog",
         "foods": {
           "likes": [
             "chicken",
             "carrots"
           ],
           "dislikes": [
             "liver",
             "broccoli"
           ]
         }
       },
       {
         "name": "Jinx",
         "species":"cat",
         "foods": {
           "likes": [
             "mice",
             "tuna"
           ],
           "dislikes": [
             "cookies",
             "spinach"
           ]
         }
       },
       {
         "name": "Bear",
         "species":"dog",
         "foods": {
           "likes": [
             "beef",
             "sweet potatoes"
           ],
           "dislikes": [
             "fish",
             "cabbage"
           ]
         }
       },
       {
         "name": "Cleo",
         "species":"cat",
         "foods": {
           "likes": [
             "fish",
             "shrimp"
           ],
           "dislikes": [
             "onions",
             "peppers"
           ]
         }
       },
       {
         "name": "Cooper",
         "species":"dog",
         "foods": {
           "likes": [
             "bacon",
             "sausages"
           ],
           "dislikes": [
             "spinach",
             "lamb"
           ]
         }
       },
       {
         "name": "Oliver",
         "species":"cat",
         "foods": {
           "likes": [
             "chicken",
             "tuna"
           ],
           "dislikes": [
             "liver",
             "green beans"
           ]
         }
       },
       {
         "name": "Bella",
         "species":"dog",
         "foods": {
           "likes": [
             "duck",
             "pumpkin"
           ],
           "dislikes": [
             "cheese",
             "carrots"
           ]
         }
       },
       {
         "name": "Simba",
         "species":"cat",
         "foods": {
           "likes": [
             "fish",
             "catnip"
           ],
           "dislikes": [
             "peanut butter",
             "tomatoes"
           ]
         }
       },
       {
         "name": "Lola",
         "species":"dog",
         "foods": {
           "likes": [
             "turkey",
             "rice"
           ],
           "dislikes": [
             "mushrooms",
             "liver"
           ]
         }
       },
       {
         "name": "Milo",
         "species":"cat",
         "foods": {
           "likes": [
             "tuna",
             "chicken"
           ],
           "dislikes": [
             "potatoes",
             "carrots"
           ]
         }
       },
       {
         "name": "Apollo",
         "species":"dog",
         "foods": {
           "likes": [
             "lamb",
             "potatoes"
           ],
           "dislikes": [
             "fish",
             "onions"
           ]
         }
       },
       {
         "name": "Luna",
         "species":"cat",
         "foods": {
           "likes": [
             "salmon",
             "catnip"
           ],
           "dislikes": [
             "cheese",
             "lettuce"
           ]
         }
       },
       {
         "name": "Cody",
         "species":"dog",
         "foods": {
           "likes": [
             "chicken",
             "carrots"
           ],
           "dislikes": [
             "liver",
             "broccoli"
           ]
         }
       },
       {
         "name": "Mocha",
         "species":"cat",
         "foods": {
           "likes": [
             "mice",
             "tuna"
           ],
           "dislikes": [
             "cookies",
             "spinach"
           ]
         }
       },
       {
         "name": "Daisy",
         "species":"dog",
         "foods": {
           "likes": [
             "beef",
             "sweet potatoes"
           ],
           "dislikes": [
             "fish",
             "cabbage"
           ]
         }
       },
       {
         "name": "Leo",
         "species":"cat",
         "foods": {
           "likes": [
             "fish",
             "shrimp"
           ],
           "dislikes": [
             "onions",
             "peppers"
           ]
         }
       },
       {
         "name": "Sophie",
         "species":"dog",
         "foods": {
           "likes": [
             "bacon",
             "sausages"
           ],
           "dislikes": [
             "spinach",
             "lamb"
           ]
         }
       },
       {
         "name": "Oscar",
         "species":"cat",
         "foods": {
           "likes": [
             "chicken",
             "tuna"
           ],
           "dislikes": [
             "liver",
             "green beans"
           ]
         }
       },
       {
         "name": "Chloe",
         "species":"dog",
         "foods": {
           "likes": [
             "duck",
             "pumpkin"
           ],
           "dislikes": [
             "cheese",
             "carrots"
           ]
         }
       },
       {
         "name": "Rocky",
         "species":"cat",
         "foods": {
           "likes": [
             "fish",
             "catnip"
           ],
           "dislikes": [
             "peanut butter",
             "tomatoes"
           ]
         }
       },
       {
         "name": "Molly",
         "species":"dog",
         "foods": {
           "likes": [
             "turkey",
             "rice"
           ],
           "dislikes": [
             "mushrooms",
             "liver"
           ]
         }
       },
       {
         "name": "Jack",
         "species":"cat",
         "foods": {
           "likes": [
             "tuna",
             "chicken"
           ],
           "dislikes": [
             "potatoes",
             "carrots"
           ]
         }
       },
       {
         "name": "Lucy",
         "species":"dog",
         "foods": {
           "likes": [
             "lamb",
             "potatoes"
           ],
           "dislikes": [
             "fish",
             "onions"
           ]
         }
       }
   
   ]

   let vino = [];
const carrito = [];

window.onload = function () {
    loadProducts();
    showProducts();
}

function buyProduct(k) {
    const txtCuadro = document.getElementById("txt" + k);
    let cantidad = parseInt(txtCuadro.value);
    if (cantidad > 0) {
        let index = carrito.findIndex(item => item.nombre === vino[k].nombre);
        if (index === -1) {
            const compra = { unidades: cantidad, ...vino[k], total: (cantidad * vino[k].precio).toFixed(2) };
            carrito.push(compra);
        } else {
            carrito[index].unidades += cantidad;
            carrito[index].total = (carrito[index].unidades * vino[k].precio).toFixed(2);
        }
        showCarrito();
    }
}

function showCarrito() {
    let listaCesta = '<table class="table table-striped"><thead><tr><th>Cantidad</th><th>Nombre</th><th>Precio</th><th>Total</th><th>Acción</th></tr></thead><tbody>';
    let totalCompra = 0;
    for (let k in carrito) {
        listaCesta += `<tr>
            <td>${carrito[k].unidades}</td>
            <td>${carrito[k].nombre}</td>
            <td>${carrito[k].precio.toFixed(2)} €</td>
            <td>${carrito[k].total} €</td>
            <td><button class="btn btn-danger btn-sm" onclick="removeFromCart(${k})">Eliminar</button></td>
        </tr>`;
        totalCompra += parseFloat(carrito[k].total);
    }
    listaCesta += '</tbody></table>';
    document.querySelector(".divCarrito").innerHTML = listaCesta;
    document.getElementById("totalCompra").innerText = totalCompra.toFixed(2);
}

function removeFromCart(index) {
    carrito.splice(index, 1);
    showCarrito();
}

function loadProducts() {
    vino = [
        { nombre: "Habla de la tierra", precio: 20.99, stock: 10, imagen: "vinos/assets/img/vinos/vino1.jpg" },
        { nombre: "Finca de la Estacada", precio: 15.00, stock: 13, imagen: "vinos/assets/img/vinos/vino2.jpg" },
        { nombre: "Peñascal", precio: 10.00, stock: 30, imagen: "vinos/assets/img/vinos/vino3.jpg" },
        { nombre: "Cabernet Franc", precio: 18.50, stock: 3, imagen: "vinos/assets/img/vinos/vino4.jpg" },
        { nombre: "Juan Gil", precio: 5.00, stock: 10, imagen: "vinos/assets/img/vinos/vino5.jpg" }
    ];
}

function showProducts() {
    let listProductos = '';
    for (let k in vino) {
        listProductos += `<div class="col-md-6 mb-4">
            <div class="card border-dark">
                <img src="${vino[k].imagen}" class="card-img-fluid" alt="${vino[k].nombre}" height="150">
                <div class="card-body">
                    <h5 class="card-title">${vino[k].nombre}</h5>
                    <p class="card-text">Precio: ${vino[k].precio.toFixed(2)} €</p>
                    <input type="number" id="txt${k}" class="form-control mb-2" value="1" min="1" max="${vino[k].stock}">
                    <button type="button" class="btn btn-primary" onclick="buyProduct('${k}')">Comprar</button>
                </div>
            </div>
        </div>`;
    }
    document.getElementById("productos").innerHTML = listProductos;
}




async function loadData() {
    return fetch("./makeup.json")
        .then(response => response.json())
        .catch(error => {
            console.error("Error al cargar los datos:", error);
            return null; // Retorna null en caso de error
        });
}

window.addEventListener('DOMContentLoaded', async () => {
    const datos = await loadData();
    if (datos && datos.products) {
        console.log(datos);

        //const strNames = datos.products.map(producto => producto.name).join("<br>");
        const strNames = datos.products.map(producto => `<li>${producto.name}</li>`).join('');

        // Seleccionar el contenedor y actualizar su contenido
        const container = document.querySelector(".container");
        if (container) {
            container.innerHTML = `<ol>${strNames}</ol>`;
        } else {
            console.error("No se encontró el elemento con la clase 'container'.");
        }
    } else {
        console.error("No se pudieron obtener los productos.");
    }
});


async function loadData() {
    return fetch("./makeup.json")
        .then(response => response.json())
        .catch(error => {
            console.error("Error al cargar los datos:", error);
            return null; // Retorna null en caso de error
        });
}

window.addEventListener('DOMContentLoaded', async () => {
    const datos = await loadData();
    if (datos && datos.products) {
        console.log(datos);

        //const strNames = datos.products.map(producto => producto.name).join("<br>");
        //const strNames = datos.products.map(producto => `<li>${producto.brand}</li>`).sort().join('');
        //   const strNames = datos.products.map(producto => `<li>${producto.created_at}-${producto.updated_at}</li>`).sort().join('');
        const strNames = datos.products.map(producto => {
            // TODO
            // cuanto tiempo ha pasado entre
            let old = new Date(producto.updated_at) - new Date(producto.created_at);
            if (old > 1000 * 60  ) {
                return `<li>${producto.created_at}-${producto.updated_at}</li>`;
            } else {
                return `<li>${producto.created_at}-${producto.updated_at}</li>`;
            }
        }).join('');
        const container = document.querySelector(".container");
        container.innerHTML = `<ol>${strNames}</ol>`;


    } else {
        console.error("No se pudieron obtener los productos.");
    }
});

{
    "products": [
    {
      "id": 1035,
      "brand": "rejuva minerals",
      "name": "Multi Purpose Powder - Blush \u0026 Eye",
      "price": "0.0",
      "price_sign": "$",
      "currency": "USD",
      "image_link": "https://www.purpicks.com/wp-content/uploads/2018/06/Rejuva-Minerals-Multi-Purpose-Powder-Blush-_-Eye-1.jpg",
      "product_link": "https://www.purpicks.com/product/rejuva-minerals-multi-purpose-powder-blush-eye/",
      "website_link": "https://purpicks.com/",
      "description": "Our Multi Purpose Pressed Powders may be used for blush or eye shadow. Blended with antioxidants from Certified Organic Fruits, Berries \u0026amp; Botanicals*. Made without any gluten containing ingredients. Mica free Pink Parfait and Papaya will offer a natural, ultra sheer semi-matte finish. The petals from beautiful crushed red roses that are found in Pink Parfait, are valued for their natural color and delightful aroma that they provide! Acai Berry will offer a natural, ultra sheer satin finish (mica added). VEGAN. Image one is Pink Parfait. Image two is Papaya, and image three is Acai Berry. Model in image four is wearing Papaya. Model in image five is wearing Acai Berry. To see a demonstration of Papaya, click on the video and fast forward to 3:44. Enjoy! This product is EWG VERIFIED\u0026#x2122; and rated 'CLEAN'in the Think Dirty app! BPA and Phthalate free packaging. Plastic parts of compacts are recyclable. *Tiny flecks of fruit and botanical particles may be visible in powder. Pink Parfait and Papaya are Titanium Dioxide and Mica free. Net Weight: 2.8 gm.",
      "rating": null,
      "category": "powder",
      "product_type": "blush",
      "tag_list": [
        "purpicks",
        "EWG Verified",
        "Hypoallergenic",
        "No Talc"
      ],
      "created_at": "2018-06-30T19:19:31.909Z",
      "updated_at": "2018-09-02T22:52:06.855Z",
      "product_api_url": "https://makeup-api.herokuapp.com/api/v1/products/1035.json",
      "api_featured_image": "//s3.amazonaws.com/donovanbailey/products/api_featured_images/000/001/035/original/open-uri20180630-4-n6wb0y?1530390383",
      "product_colors": [
        {
          "hex_value": "#E1BFC0",
          "colour_name": "Pink Parfait"
        },
        {
          "hex_value": "#D7A7A3",
          "colour_name": "Papaya"
        },
        {
          "hex_value": "#E6C3CB",
          "colour_name": "Acai Berry"
        }
      ]
    },
    {
      "id": 1026,
      "brand": "marienatie",

      function editPeli(e, pelie) {
        const formulario = document.forms.peliForm;
        formulario.reset();
        const tableBody = document.getElementById("peli-table-body").rows;
    
        let peli = pelis.find(p => p.Title === pelie);
    
        console.log(peli)
        formulario.title.value = peli.Title;
        formulario.imdbRating.value = peli.imdbRating;
    }
    
    
    function renderTable() {
        const tableBody = document.getElementById("peli-table-body");
        tableBody.innerHTML = "";  // Limpiar el contenido de la tabla antes de renderizar
    
        let peliss = pelis.sort(((a, b) => {
            if (a.updated === undefined ) {
                return -1;
            }
            if (b.updated === undefined) {
                return 1;
            }
            return a.updated - b.updated;
        }));
    
        peliss.forEach((peli, index) => {
            const row = document.createElement("tr");
    
            // Celda de nombre
            const nameCell = document.createElement("td");
            nameCell.innerText = peli.Title;
            row.appendChild(nameCell);
    
    
    
            // Celda de actores
            const likesCell = document.createElement("td");
            likesCell.innerHTML = peli.Actors.split(',').join("<br>");
            row.appendChild(likesCell);
    
            // Celda de especie
            const speciesCell = document.createElement("td");
            speciesCell.innerText = peli.imdbRating;
            row.appendChild(speciesCell);
    
            const actionCell = document.createElement("td");
            if (peli.updated) {
                updated = new Date(Number(peli.updated));
                actionCell.innerHTML = `${updated.getFullYear()}-${updated.getMonth() + 1}-${updated.getDate()}`;
            } else {
                actionCell.innerHTML = `<button className="btn btn-warning mt-2"  onClick="editPeli(event,'${peli.Title}')">Editar</button>`;
            }
    
            row.appendChild(actionCell);
    
            // Agregar fila a la tabla
            tableBody.appendChild(row);
        });
    }
    
    document.querySelector('#submit').addEventListener('click', (e) => {
    
        e.preventDefault()
        const formulario = document.forms.peliForm;
        const peli = pelis.find(a => a.Title === formulario.title.value);
    
        if (!isNaN(formulario.imdbRating.value)) {
            peli.imdbRating = formulario.imdbRating.value;
            peli.updated = new Date();
        }
    
        console.log(peli);
        document.querySelector("#results").innerHTML = `<pre>${JSON.stringify(peli, null, 2)}</pre>`;
        renderTable();
    });
    
    
    renderTable()

    let vino = [];
const carrito = [];

window.onload = function () {
    loadProducts();
    showProducts();
}

function buyProduct(k) {
    const txtCuadro = document.getElementById("txt" + k);
    let cantidad = parseInt(txtCuadro.value);
    if (cantidad > 0) {
        let index = carrito.findIndex(item => item.nombre === vino[k].nombre);
        if (index === -1) {
            const compra = { unidades: cantidad, ...vino[k], total: (cantidad * vino[k].precio).toFixed(2) };
            carrito.push(compra);
        } else {
            carrito[index].unidades += cantidad;
            carrito[index].total = (carrito[index].unidades * vino[k].precio).toFixed(2);
        }
        showCarrito();
    }
}

function showCarrito() {
    let listaCesta = '<table class="table table-striped"><thead><tr><th>Cantidad</th><th>Nombre</th><th>Precio</th><th>Total</th><th>Acción</th></tr></thead><tbody>';
    let totalCompra = 0;
    for (let k in carrito) {
        listaCesta += `<tr>
            <td>${carrito[k].unidades}</td>
            <td>${carrito[k].nombre}</td>
            <td>${carrito[k].precio.toFixed(2)} €</td>
            <td>${carrito[k].total} €</td>
            <td><button class="btn btn-danger btn-sm" onclick="removeFromCart(${k})">Eliminar</button></td>
        </tr>`;
        totalCompra += parseFloat(carrito[k].total);
    }
    listaCesta += '</tbody></table>';
    document.querySelector(".divCarrito").innerHTML = listaCesta;
    document.getElementById("totalCompra").innerText = totalCompra.toFixed(2);
}

function removeFromCart(index) {
    carrito.splice(index, 1);
    showCarrito();
}

function loadProducts() {
    vino = [
        { nombre: "Aloe 1", precio: 20.99, stock: 10, imagen: "/assets/img/foodplants/aloevera/aloevera835.jpg" },
        { nombre: "Aloe 2", precio: 15.00, stock: 13, imagen: "/assets/img/foodplants/aloevera/aloevera834.jpg" },
        { nombre: "Aloe 3", precio: 10.00, stock: 30, imagen: "/assets/img/foodplants/aloevera/aloevera829.jpg" },
        { nombre: "Aloe 4", precio: 18.50, stock: 3, imagen: "/assets/img/foodplants/aloevera/aloevera826.jpg" },
        { nombre: "Aloe 5", precio: 5.00, stock: 10, imagen: "/assets/img/foodplants/aloevera/aloevera825.jpg" }
    ];
}

function showProducts() {
    let listProductos = '';
    for (let k in vino) {
        listProductos += `<div class="col-md-4 mb-4">
            <div class="card border-dark">
                <img src="${vino[k].imagen}" class="card-img-fluid" alt="${vino[k].nombre}" height="150">
                <div class="card-body">
                    <h5 class="card-title">${vino[k].nombre}</h5>
                    <p class="card-text">Precio: ${vino[k].precio.toFixed(2)} €</p>
                    <input type="number" id="txt${k}" class="form-control mb-2" value="1" min="1" max="${vino[k].stock}">
                    <button type="button" class="btn btn-primary" onclick="buyProduct('${k}')">Comprar</button>
                </div>
            </div>
        </div>`;
    }
    document.getElementById("productos").innerHTML = listProductos;
}